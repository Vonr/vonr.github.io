import{w as c,d as g}from"./entry.ac5okEKW.js";import{j as h}from"./disclose-version.DmDeFS71.js";import{K as v,r as S,e as b,p as $,a as _,aF as T}from"./runtime.CiCsa9IZ.js";import{i as E}from"./lifecycle.Dbio13cw.js";import{s as L,b as f,a as y}from"./store.BLfhTkBW.js";function Y(e,t,n,s=!0){s&&n();for(var o of t)e.addEventListener(o,n);v(()=>{for(var l of t)e.removeEventListener(l,n)})}function x(e,t,n=t){var s=()=>{o=!0,clearTimeout(l),l=setTimeout(i,100),n(window.scrollY)};addEventListener("scroll",s,{passive:!0});var o=!1,l,i=()=>{o=!1},d=!0;S(()=>{var u=t();d?d=!1:!o&&u!=null&&(o=!0,clearTimeout(l),scrollTo(window.scrollX,u),l=setTimeout(i,100))}),b(s),v(()=>{removeEventListener("scroll",s)})}function m(e,t){Y(window,["resize"],()=>t(window[e]))}const j=c("light"),F=c(900),p=c(900),I=c(900),A=g([p,I],([e,t])=>e<t),w=c(0),J=c({x:0,y:0}),N=e=>{J.update(()=>({x:e.clientX,y:e.clientY}))};function K(e,t){$(t,!1);const n=L(),s=()=>y(w,"$scrollY",n);E(),h("mousemove",T,o=>N(o)),m("innerHeight",o=>f(F,o)),m("innerWidth",o=>f(p,o)),x("y",s,o=>f(w,o)),_()}const O=(e,t)=>{const n=typeof globalThis.window<"u";let s=t;const{set:o,...l}=c(t,()=>{if(n){d();const r=a=>{a.key===e&&d()};return window.addEventListener("storage",r),()=>window.removeEventListener("storage",r)}else return()=>{}}),i=r=>{s=r,o(r);try{localStorage.setItem(e,JSON.stringify(r))}catch(a){console.error(`the \`${e}\` store's new value \`${r}\` could not be persisted to localStorage because of ${a}`)}},d=()=>{let r=null;try{r=localStorage.getItem(e)}catch(a){console.error(`the \`${e}\` store's value could not be restored from localStorage because of ${a}`)}if(r===null)i(t);else try{const a=JSON.parse(r);o(a),s=a}catch(a){console.error(`localStorage's value for \`${e}\` (\`${r}\`) could not be parsed as JSON because of ${a}`)}};return{...l,set:i,update:r=>{i(r(s))}}},z=typeof window<"u"&&globalThis.localStorage&&"theme"in localStorage?localStorage.getItem("theme"):"dark";O("theme",z);export{K as D,I as a,A as m,j as t};
